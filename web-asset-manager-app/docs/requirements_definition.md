# 要件定義書（Web Asset Manager）

## 1. 目的
車載ECU解析や検証で利用するデバイス・ライセンスを、構成（Configuration）単位で一元管理し、割当状況・履歴を可視化する。

## 2. 対象範囲
- ブラウザで利用するWebアプリ
- デバイス/ライセンスの台帳管理
- 構成（Configuration）管理、割当、配置
- 変更履歴（監査ログ）

## 3. 用語
- **デバイス**: 物理機器（PC、計測器、インターフェース等）
- **ライセンス**: ソフトウェア利用権
- **構成（Configuration）**: デバイス/ライセンスの組み合わせ単位
- **監査ログ**: 変更履歴の記録（ハッシュチェーン）

## 4. ステークホルダー
- 利用者: 構成を作成・更新する技術者
- 管理者: 資産台帳のメンテナンス担当

## 5. 機能要件
### 5.1 画面/機能
- **REQ-F-001**: トップ画面は「Assets」「Configurations」の2メニューを提供する。
- **REQ-F-002**: デバイス一覧を表示し、新規登録/編集/削除ができる。
- **REQ-F-003**: ライセンス一覧を表示し、新規登録/編集/削除ができる。
- **REQ-F-004**: デバイス/ライセンス一覧は検索とソートに対応する。
- **REQ-F-005**: 構成一覧は検索・ソート・一覧/キャンバス表示を提供する。
- **REQ-F-006**: 構成は新規登録/編集/削除ができる。
- **REQ-F-007**: 構成詳細で割当デバイス/ライセンスと履歴を確認できる。
- **REQ-F-008**: ドラッグ&ドロップでデバイスを構成へ割当/移動できる。
- **REQ-F-009**: ドラッグ&ドロップでライセンスを構成へ割当/移動できる。
- **REQ-F-010**: 構成カードはキャンバス上でドラッグ移動でき、位置を保存する。
- **REQ-F-011**: 構成カードは地域タブ（日本/アメリカ）で表示切替できる。
- **REQ-F-012**: 初回起動時はサンプルデータを自動投入する。
- **REQ-F-013**: `/health` と `/api/summary` を提供し稼働確認できる。
- **REQ-F-014**: 構成の作成/更新/削除/割当/移動/位置変更は監査ログに記録する。

### 5.2 監査要件
- **REQ-F-015**: 監査ログは前後ハッシュを持つチェーン構造で保存する。
- **REQ-F-016**: 監査ログは構成詳細画面で参照できる。

## 6. 非機能要件
- **REQ-N-001**: UIはRedmine風のテーブル/検索バーの操作感を持つ。
- **REQ-N-002**: ローカル環境で1ユーザー利用を想定し、一覧表示は2秒以内を目標とする。
- **REQ-N-003**: データはSQLiteで永続化する。
- **REQ-N-004**: 外部サービス連携は行わない（ローカル完結）。
- **REQ-N-005**: 監査ログは改ざん検知可能なハッシュチェーン形式とする。
- **REQ-N-006**: 主要ユーザーフローに対する自動テストを用意する。

## 7. 制約・前提
- Python 3.12 / FastAPI / Jinja2 / SQLiteを使用する。
- 認証/認可は対象外（閉域またはローカル運用を前提）。
- 多言語対応は対象外（日本語UI）。
